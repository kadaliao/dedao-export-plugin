# 得到专栏工具集

两个实用的油猴脚本，帮助你更好地使用得到APP网页版。

## 🚀 脚本列表

### 1. 得到专栏导出PDF工具 (dedao-export.user.js)
一键将得到专栏文章导出为PDF，支持文字选择和搜索。

### 2. 得到解除复制限制 (dedao-copy-unlock.user.js) ✨ NEW
解除得到网站的右键、复制、选择等限制，让你自由复制文章内容。

---

## 📋 功能特性

### PDF导出工具
- 一键打开打印窗口保存为PDF格式(文字可复制/搜索)
- 保留文章标题、课程名称、日期、作者等元信息
- 自动格式化文章内容,生成美观的PDF文档
- 支持图片导出
- 添加导出时间戳

### 解除复制限制工具
- 🖱️ 启用右键菜单
- 📝 允许文字选择
- 📋 允许复制粘贴
- 🔓 移除所有内容保护限制
- ⚡ 实时监控并自动清除新增限制

## 安装步骤

### 1. 安装油猴扩展

首先需要在浏览器中安装Tampermonkey(油猴)扩展:

- **Chrome/Edge**: 访问 [Chrome Web Store](https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo)
- **Firefox**: 访问 [Firefox Add-ons](https://addons.mozilla.org/en-US/firefox/addon/tampermonkey/)
- **Safari**: 访问 [App Store](https://apps.apple.com/us/app/tampermonkey/id1482490089)

### 2. 安装脚本

#### 方式一: 直接安装（推荐）
1. 点击你需要的脚本文件：
   - [dedao-export.user.js](dedao-export.user.js) - PDF导出工具
   - [dedao-copy-unlock.user.js](dedao-copy-unlock.user.js) - 解除复制限制工具
2. 点击 "Raw" 按钮
3. Tampermonkey会自动识别并弹出安装提示
4. 点击"安装"按钮

#### 方式二: 手动安装
1. 打开Tampermonkey管理面板
2. 点击"添加新脚本"标签
3. 复制对应脚本文件的全部内容
4. 粘贴到编辑器中
5. 点击"文件" -> "保存"

**推荐**: 两个脚本可以同时安装使用，互不冲突。

## 使用方法

### PDF导出工具

1. 登录得到APP网页版: https://www.dedao.cn
2. 打开任意专栏文章页面(URL格式: `https://www.dedao.cn/course/article?id=xxx`)
3. 页面右上角会自动出现"🖨️ 打印/保存PDF"按钮
4. 点击按钮,等待打印窗口打开
5. 在打印对话框中选择"保存为PDF"

### 解除复制限制工具

1. 安装脚本后，访问得到网站任意页面
2. 脚本会自动运行，无需手动操作
3. 现在可以：
   - 右键点击文字，显示浏览器菜单
   - 自由选择和复制任何文字内容
   - 使用 Ctrl+C / Cmd+C 快捷键复制
4. 打开浏览器控制台（F12）可以看到脚本运行状态

## 注意事项

### PDF导出工具
- 脚本需要在文章页面完全加载后才会显示导出按钮
- 导出PDF时请保持页面打开,不要切换或关闭标签页
- 若浏览器拦截弹窗,请允许本站点打开新窗口后重试
- 文章内容较多时,生成PDF可能需要几秒钟时间
- PDF文件名自动使用文章标题命名

### 解除复制限制工具
- 脚本在 `document-start` 阶段运行，确保在页面加载前生效
- 首次安装后需要刷新页面（推荐使用 Ctrl+Shift+R 强制刷新）
- 如果右键菜单仍未生效���请检查浏览器控制台的日志信息
- 脚本会实时监控并清除新增的限制，无需手动操作

## 功能说明

### 导出内容包括

- 文章标题
- 课程名称
- 发布日期
- 作者信息
- 文章正文内容
- 文章中的图片
- 导出时间戳

### 自动过滤内容

脚本会自动过滤以下内容,使PDF更简洁:

- 留言评论区
- 音频播放器
- 页面按钮
- 广告元素

## 技术说明

- 使用浏览器打印引擎生成PDF(文字可选择)
- 支持中文字体渲染
- A4纸张大小,纵向排版
- 高质量图片导出(98%质量)

## 常见问题

### 1. 按钮没有出现?
- 确保已安装Tampermonkey扩展
- 确保脚本已启用
- 刷新页面重试（Ctrl+Shift+R 强制刷新）
- 检查URL是否为文章页面
- **查看详细调试步骤**: [故障排查指南](TROUBLESHOOTING.md)

### 2. PDF导出失败?
- 检查网络连接
- 确保页面完全加载
- 尝试刷新页面后重新导出
- 打开浏览器控制台（F12）查看错误信息
- **查看详细调试步骤**: [故障排查指南](TROUBLESHOOTING.md)

### 3. PDF内容不完整?
- 等待页面完全加载后再导出
- 检查文章是否需要向下滚动才能看到全部内容
- 尝试刷新页面后重新导出

### 4. 如何查看脚本是否正常运行?
- 按F12打开浏览器控制台
- 查看Console标签页
- 应该能看到"得到专栏导出PDF脚本已加载"等日志信息
- **详细说明**: [故障排查指南](TROUBLESHOOTING.md)

## 更新日志

### v1.1.0 (2026-01-23) ✨ NEW
**新增**: 得到解除复制限制工具
- 解除右键菜单限制
- 解除文字选择限制
- 解除复制粘贴限制
- 通过劫持 Event 原型方法，防止网站阻止事件
- 实时监控并清除新增的限制

### v2.1.0 (2026-01-21)
**PDF导出工具优化**
- 修复正文内容提取问题

### v2.0.0 (2026-01-21)
**PDF导出工具重大更新**
- 新增打印版PDF导出方案
- 优化PDF文字可选择性

### v1.0.0 (2026-01-20)
**首次发布**
- 实现基本的PDF导出功能
- 支持文章标题、正文、图片导出
- 添加导出进度提示

## 许可证

MIT License

## 贡献

欢迎提交Issue和Pull Request!

## 免责声明

本工具仅供个人学习和研究使用,请勿用于商业用途。导出的内容版权归得到APP及原作者所有。
